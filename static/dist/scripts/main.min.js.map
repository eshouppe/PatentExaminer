{"version":3,"sources":["vennSearchView.js"],"names":["window","Backbone","Handlebars","Templates","app","vennSearchView","View","extend","template","el","class","viewState","primarysearch","viewTitle","frequentWordModel","s1","s2","s3","events","click .vennSearchView .searchContainer .searchnow","click .vennSearchView .primaryResultsContainer .searchnow","click .vennSearchView .primaryResultsContainer .topic","change .vennSearchView .primaryResultsContainer input","initialize","this","render","changePageTitle","$el","html","componentHandler","upgradeDom","primarySearch","changeLoader","primaryresults","treeChart1","treeChart","name","children","vennSearch","vennresults","chart","chartView","drawGraph","data","show","showHideLoadingBar","newtitle","onFrequentWordSelectionInputChange","event","currentInput","find","currentTarget","inputChangedNewValue","val","attr","syncGraphAndSearchInputs","commonWordOnGraphSelection","currentSelection","$","selection","hasClass","removeClass","addRemoveTermToFrequentModel","addClass","term","remove","frequentWord","found","countOfTerms","context","updateGraph","allTopicNodes","updateInputFields","parent","search1","search2","search3"],"mappings":"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","file":"main.min.js","sourcesContent":["/**\n * Created by ryancarlton on 1/22/17.\n */\n(function (window, Backbone, Handlebars, Templates) {\n  window.app.vennSearchView = Backbone.View.extend({\n    template: '<span>vennSearchView view</span>',\n    el: '#appView',\n    class: 'vennSearchView',\n    viewState:{primarysearch:true},\n    viewTitle:'New Primary Search',\n    frequentWordModel: {\n      's1':'',\n      's2':'',\n      's3':''\n    },\n    events: {\n      'click .vennSearchView .searchContainer .searchnow':'primarySearch',\n      'click .vennSearchView .primaryResultsContainer .searchnow':'vennSearch',\n      'click .vennSearchView .primaryResultsContainer .topic':'commonWordOnGraphSelection',\n      'change .vennSearchView .primaryResultsContainer input':'onFrequentWordSelectionInputChange'\n    },\n    initialize: function () {\n      //Reup the state if need be\n\n      this.render();\n    },\n    render: function () {\n      this.template = Templates.vennSearchView(this.viewState);\n      this.changePageTitle(this.viewTitle);\n      this.$el.html(this.template);\n      //required after adding new material items\n      componentHandler.upgradeDom();\n    },\n    primarySearch: function () {\n      //Setup Primary search logic here\n      this.changeLoader(true);\n      this.viewState = {primaryresults:true};\n      this.viewTitle='Filter By Common Words';\n      this.render();\n      this.treeChart1 = new window.app.treeChart({\n        \"name\": \"Pirate\",\n        \"children\": [\n          {\"name\": \"Ball\"},\n          {\"name\": \"Steel\"},\n          {\"name\": \"Carbon\"},\n          {\"name\":\"Powder\"},\n          {\"name\":\"Ship\"},\n          {\"name\":\"Wood\"},\n          {\"name\":\"Parrot\"},\n          {\"name\":\"Treasure\"},\n          {\"name\":\"Bounty\"},\n          {\"name\":\"Wench\"}\n          // {\n          //   \"name\":\"Pirate\",\n          //   \"children\":[\n          //     {\"name\":\"Barbosa\"},\n          //     {\"name\":\"Jack\"}\n          //   ]\n          // }\n        ]\n      });\n      this.changeLoader(false);\n    },\n    vennSearch: function () {\n      this.changeLoader(true);\n      this.viewState = {vennresults:true};\n      this.viewTitle='Venn Results';\n      this.render();\n      this.changeLoader(false);\n      this.chart = new window.app.chartView();\n      this.chart.drawGraph(window.app.data.primarySearch);\n\n    },\n    changeLoader: function (show) {\n      window.app.showHideLoadingBar(show);\n    },\n    changePageTitle: function (newtitle) {\n      window.app.changePageTitle(newtitle);\n    },\n    onFrequentWordSelectionInputChange: function (event) {\n      var currentInput = this.$el.find(event.currentTarget),\n        inputChangedNewValue = currentInput.val();\n      if (currentInput.attr('id') === 'search2') {\n        this.frequentWordModel.s1 = inputChangedNewValue;\n      }\n      if (currentInput.attr('id') === 'search3') {\n        this.frequentWordModel.s2 = inputChangedNewValue;\n      }\n      if (currentInput.attr('id') === 'search4') {\n        this.frequentWordModel.s3 = inputChangedNewValue;\n      }\n      this.syncGraphAndSearchInputs();\n    },\n    commonWordOnGraphSelection: function (event) {\n      var currentSelection = $(event.currentTarget),\n        selection = currentSelection.data('topic');\n      //Based on active class present decide if adding or removing a term\n      if(currentSelection.hasClass('active')) {\n        currentSelection.removeClass('active');\n        this.addRemoveTermToFrequentModel(selection,true);\n      } else if (!currentSelection.hasClass('active')) {\n        currentSelection.addClass('active');\n        this.addRemoveTermToFrequentModel(selection,false);\n      }\n      this.syncGraphAndSearchInputs();\n\n    },\n    addRemoveTermToFrequentModel: function (term, remove) {\n      var found = false,\n        countOfTerms = 0,\n        frequentWord,\n        context = this;\n\n      for(frequentWord in context.frequentWordModel) {\n        if (context.frequentWordModel[frequentWord] === term) {\n          found = true;\n        }\n        if (context.frequentWordModel[frequentWord] !== '') {\n          countOfTerms += 1;\n        }\n      }\n\n\n      if (remove) {\n\n        if (!found || countOfTerms === 0) {\n          return;\n        }\n        if (context.frequentWordModel.s1 === term) {\n          context.frequentWordModel.s1 = '';\n        } else if (context.frequentWordModel.s2 === term) {\n          context.frequentWordModel.s2 = '';\n        } else if (context.frequentWordModel.s3 === term) {\n          context.frequentWordModel.s3 = '';\n        }\n      } else {\n        if (found) {\n          return;\n        }\n        if (countOfTerms === 3) {\n          for(frequentWord in context.frequentWordModel) {\n            context.frequentWordModel[frequentWord]  = '';\n          }\n        }\n        if (context.frequentWordModel.s1 === '') {\n          context.frequentWordModel.s1 = term;\n        } else if (context.frequentWordModel.s2 === '') {\n          context.frequentWordModel.s2 = term;\n        } else if (context.frequentWordModel.s3 === '') {\n          context.frequentWordModel.s3 = term;\n        }\n      }\n    },\n    syncGraphAndSearchInputs: function () {\n      var search1 = $('#search2'),\n        search2 = $('#search3'),\n        search3 = $('#search4'),\n        context = this,\n        allTopicNodes = this.$el.find('.topic');\n        //allActiveTopicNodes = this.$el.find('.topic.active');\n\n      function updateGraph() {\n        allTopicNodes.removeClass('active');\n        context.$el.find('.topic[data-topic=\"'+ context.frequentWordModel.s1 +'\"]').addClass('active');\n        context.$el.find('.topic[data-topic=\"'+ context.frequentWordModel.s2 +'\"]').addClass('active');\n        context.$el.find('.topic[data-topic=\"'+ context.frequentWordModel.s3 +'\"]').addClass('active');\n      }\n      function updateInputFields() {\n        context.$el.find('.primaryResultsContainer input')\n          .val('')\n          .parent()\n          .removeClass('is-dirty')\n          .removeClass('is-focused');\n        if (context.frequentWordModel.s1 !== '') {\n          search1\n            .val(context.frequentWordModel.s1)\n            .parent()\n            .addClass('is-dirty')\n            .addClass('is-focused');\n        }\n        if (context.frequentWordModel.s2 !== '') {\n          search2\n            .val(context.frequentWordModel.s2)\n            .parent()\n            .addClass('is-dirty')\n            .addClass('is-focused');\n        }\n        if (context.frequentWordModel.s3 !== '') {\n          search3\n            .val(context.frequentWordModel.s3)\n            .parent()\n            .addClass('is-dirty')\n            .addClass('is-focused');\n        }\n      }\n      updateGraph();\n      updateInputFields();\n    }\n  });\n})(window, Backbone, Handlebars, Templates);\n"]}