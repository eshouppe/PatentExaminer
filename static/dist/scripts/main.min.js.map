{"version":3,"sources":["main.js"],"names":["buildInitialChart","data","series","options","showLine","axisX","showGrid","showLabel","type","Chartist","AutoScaleAxis","labelInterpolationFnc","value","index","axisY","plugins","tooltip","responsiveOptions","Line","on","onDrawUpdates","drawGraph","newData","resultsToPlot","idx","doc","meta","patent_ID","push","circle1","search1Circle","circle2","search2Circle","test","seq","mychart","update","animatePoints","addCircles","element","animate","opacity","begin","dur","from","to","x1","x","easing","Svg","Easing","easeOutQuart","axis","axisLength","getMultiValue","range","min","max","r","y","circ1","circ2","attr","cx","cy","class","group","append","searchNow","processResults","populateApiResults","showToast","$searchButton","$progressBar","fadeOut","$","$searchBox1","$searchBox2","fadeIn","searchObj","search1","val","search2","ajax","url","contentType","dataType","method","JSON","stringify","success","error","response","status","$docsFound","$searchTermsUsed","empty","obj","matchingPatentNums","terms","searchedTerms","length","text","snackbarContainer","document","querySelector","toastMessage","message","MaterialSnackbar","showSnackbar","isLocalhost","Boolean","window","location","hostname","match","navigator","protocol","serviceWorker","register","then","registration","onupdatefound","controller","installingWorker","installing","onstatechange","state","Error","e","console","keypress","event","keycode","keyCode","which","click","currentClickedObj","currentTarget","preventDefault","hide","show"],"mappings":"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","file":"main.min.js","sourcesContent":["/*!\n *\n *  Web Starter Kit\n *  Copyright 2015 Google Inc. All rights reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    https://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License\n *\n */\n/* eslint-env browser */\n(function() {\n  'use strict';\n\n  // Check to make sure service workers are supported in the current browser,\n  // and that the current page is accessed from a secure origin. Using a\n  // service worker from an insecure origin will trigger JS console errors. See\n  // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n  var isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.1/8 is considered localhost for IPv4.\n      window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n      )\n    );\n\n  if ('serviceWorker' in navigator &&\n      (window.location.protocol === 'https:' || isLocalhost)) {\n    navigator.serviceWorker.register('service-worker.js')\n    .then(function(registration) {\n      // updatefound is fired if service-worker.js changes.\n      registration.onupdatefound = function() {\n        // updatefound is also fired the very first time the SW is installed,\n        // and there's no need to prompt for a reload at that point.\n        // So check here to see if the page is already controlled,\n        // i.e. whether there's an existing service worker.\n        if (navigator.serviceWorker.controller) {\n          // The updatefound event implies that registration.installing is set:\n          // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event\n          var installingWorker = registration.installing;\n\n          installingWorker.onstatechange = function() {\n            switch (installingWorker.state) {\n              case 'installed':\n                // At this point, the old content will have been purged and the\n                // fresh content will have been added to the cache.\n                // It's the perfect time to display a \"New content is\n                // available; please refresh.\" message in the page's interface.\n                break;\n\n              case 'redundant':\n                throw new Error('The installing ' +\n                                'service worker became redundant.');\n\n              default:\n                // Ignore\n            }\n          };\n        }\n      };\n    }).catch(function(e) {\n      console.error('Error during service worker registration:', e);\n    });\n  }\n\n  //Charting functions:\n  //********************\n  var test = 2;\n  var seq = 0;\n  var circle1 = {};\n  var circle2 = {};\n  var mychart = buildInitialChart();\n\n  function buildInitialChart() {\n\n    var data = {\n      series: [\n        // [\n        //   {x: 1, y: 100, meta:'tttt'},\n        //   {x: 2, y: 50},\n        //   {x: 3, y: 25},\n        //   {x: 5, y: 12.5},\n        //   {x: 8, y: 6.25}\n        // ],\n        // [\n        //   {x: 10, y: 67},\n        //   {x: 2, y: 25},\n        //   {x: 15, y: 34},\n        //   {x: 13, y: 65.5},\n        //   {x: 25, y: 12.25}\n        // ]\n      ]\n    };\n    var options = {\n      showLine: false,\n      axisX: {\n        showGrid: true,\n        showLabel: false,\n        type: Chartist.AutoScaleAxis,\n        labelInterpolationFnc: function(value, index) {\n          return index % 13 === 0 ? 'x' + value : null;\n        }\n      },\n      axisY: {\n        showGrid: true,\n        showLabel: false,\n        type: Chartist.AutoScaleAxis,\n      },\n      plugins: [\n        Chartist.plugins.tooltip()\n      ]\n    };\n\n    var responsiveOptions = [\n      ['screen and (min-width: 640px)', {\n        axisX: {\n          labelInterpolationFnc: function(value, index) {\n            return index % 4 === 0 ? 'W' + value : null;\n          }\n        }\n      }]\n    ];\n    return new Chartist.Line('#resultsChart', data, options, responsiveOptions).on('draw', onDrawUpdates);\n  }\n\n  function drawGraph(data){\n    //TODO: Parse Data here\n    var newData = {\n      series:[\n        [],\n        [],\n        []\n      ]\n    };\n    if (data.resultsToPlot) {\n      for (var idx in data.resultsToPlot) {\n        var doc = data.resultsToPlot[idx];\n        doc.meta = doc.patent_ID;\n        newData.series[doc.series - 1].push(doc);\n      }\n    }\n    circle1 = data.search1Circle;\n    circle2 = data.search2Circle;\n    test = 0;\n    seq = 0;\n\n    mychart.update(newData)\n\n  }\n\n  function onDrawUpdates(data) {\n    animatePoints(data);\n    addCircles(data);\n  }\n  function animatePoints(data) {\n    //todo: data.element.addClass('test')\n    //only add teh class on the last object item\n    if(data.type === 'point') {\n          // If the drawn element is a line we do a simple opacity fade in. This could also be achieved using CSS3 animations.\n      data.element.animate({\n        opacity: {\n          // The delay when we like to start the animation\n          begin: seq++ * 80,\n          // Duration of the animation\n          dur: 50,\n          // The value where the animation should start\n          from: 0,\n          // The value where it should end\n          to: 1\n        },\n        x1: {\n          begin: seq++ * 80,\n          dur: 50,\n          from: data.x - 100,\n          to: data.x,\n          // You can specify an easing function name or use easing functions from Chartist.Svg.Easing directly\n          easing: Chartist.Svg.Easing.easeOutQuart\n        }\n      });\n    }\n  }\n  function addCircles(data) {\n    if (data.type === 'grid' && data.index === 0 && test === 0) {\n      test += 1;\n      // create a custom label element to insert into the bar\n      var label = new Chartist.Svg(\"circle\");\n      circle1.x = data.axis.axisLength * (Chartist.getMultiValue(circle1.x,'x') - data.axis.range.min)/(data.axis.range.max-data.axis.range.min);\n      circle2.x = data.axis.axisLength * (Chartist.getMultiValue(circle2.x,'x') - data.axis.range.min)/(data.axis.range.max-data.axis.range.min);\n      circle1.r = (circle1.r * circle1.x);\n      circle2.r = (circle2.r * circle2.x);\n    }\n    // if (data.type === 'grid' && data.index === 1 && test === 1 && ) {\n    if (data.type === 'grid' && data.index === 0 && test === 1) {\n      test += 1;\n      circle1.y = data.axis.axisLength * (Chartist.getMultiValue(circle1.y,'y') - data.axis.range.min)/(data.axis.range.max-data.axis.range.min);\n      circle2.y = data.axis.axisLength * (Chartist.getMultiValue(circle2.y,'y') - data.axis.range.min)/(data.axis.range.max-data.axis.range.min);\n    }\n    if (data.type === 'point' && data.index === 0 && test === 2) {\n      test += 1;\n      var circ1 = new Chartist.Svg(\"circle\");\n      var circ2 = new Chartist.Svg(\"circle\");\n      //circle1.r = (circle1.r * circle1.x)/(circle1.r * circle1.y);\n      //circle2.r = (circle2.r * circle2.x)/(circle2.r * circle2.y);\n\n      circ1.attr({\n        cx: circle1.y,\n        cy: circle1.x,\n        r:[circle1.r],\n        \"class\":\"vennCircle1\"\n      });\n      circ2.attr({\n        cx: circle2.y,\n        cy: circle2.x,\n        r:[circle2.r],\n        \"class\":\"vennCircle2\"\n      });\n      // add the new custom text label to the bar\n      data.group.append(circ1);\n      data.group.append(circ2);\n    }\n\n  }\n  function searchNow() {\n    var $progressBar = $('.searchContainer .searchProgress'),\n      $searchButton = $('.searchContainer .searchnow'),\n      $searchBox1 = $('.searchContainer #search1'),\n      $searchBox2 = $('.searchContainer #search2');\n\n    //Start search\n    $searchButton.attr('disabled', true);\n    $progressBar.fadeIn();\n\n    var searchObj = {\n      'search1':$searchBox1.val() || '',\n      'search2':$searchBox2.val() || ''\n    };\n    if (searchObj['search1'] === '' && searchObj['search2'] !== '') {\n      searchObj.search1 = searchObj.search2;\n      searchObj.search2 = '';\n    }\n    function processResults(data){\n      //Successfully made search\n      populateApiResults(data);\n      drawGraph(data);\n      showToast('Search Finished');\n      $searchButton.attr('disabled', false);\n      $progressBar.fadeOut();\n    }\n    $.ajax({\n      // url: '/venn/api/v1.0/search',\n      url: 'http://localhost:5000/venn/api/v1.0/search',\n      contentType: \"application/json\",\n      dataType:'json',\n      method:'POST',\n      //data is the search term\n      data:JSON.stringify(searchObj),\n      success: processResults,\n      error: function(response){\n        //var errorCode = JSON.parse(xhr.responseText);\n        $searchButton.attr('disabled', false);\n        $progressBar.fadeOut();\n        showToast('Search Error Occurred - Code:' + response.status);\n      }\n    });\n  }\n\n  function populateApiResults(data) {\n    var $docsFound = $('.docFound'),\n      $searchTermsUsed = $('.searchedTerms');\n    $docsFound.empty();\n    $searchTermsUsed.empty();\n    for(var obj in data.matchingPatentNums) {\n      $docsFound.append('<li class=\"mdl-list__item center\">' +\n        '<span class=\"mdl-chip mdl-chip--contact\">'+\n        '<span class=\"mdl-chip__contact mdl-color--teal mdl-color-text--white\">' +\n        ' <i class=\"material-icons mdl-list__item-icon\">description</i>' +\n        '</span>'+\n        ' <span class=\"mdl-chip__text\">'+data.matchingPatentNums[obj] +'</span></span>' +\n        '</li>');\n    }\n    for(var terms in data.searchedTerms) {\n      $searchTermsUsed.append('<li class=\"mdl-list__item center\">' +\n        '<span class=\"mdl-chip mdl-chip--contact\">'+\n        '<span class=\"mdl-chip__contact mdl-color--teal mdl-color-text--white\">' +\n        ' <i class=\"material-icons mdl-list__item-icon\">find_in_page</i>' +\n        '</span>'+\n        ' <span class=\"mdl-chip__text\">'+ data.searchedTerms[terms] +'</span></span>' +\n        '</li>');\n    }\n    if (data.matchingPatentNums.length < 1) {\n      $docsFound.append('<li class=\"mdl-list__item center\">' +\n        '<span class=\"mdl-chip mdl-chip--contact\">'+\n        '<span class=\"mdl-chip__contact mdl-color--teal mdl-color-text--white\">' +\n        ' <i class=\"material-icons mdl-list__item-icon\">description</i>' +\n        '</span>'+\n        ' <span class=\"mdl-chip__text\">None Found</span></span>' +\n        '</li>');\n    }\n    if (data.searchedTerms.length < 1) {\n      $searchTermsUsed.append('<li class=\"mdl-list__item center\">' +\n        '<span class=\"mdl-chip mdl-chip--contact\">'+\n        '<span class=\"mdl-chip__contact mdl-color--teal mdl-color-text--white\">' +\n        ' <i class=\"material-icons mdl-list__item-icon\">find_in_page</i>' +\n        '</span>'+\n        ' <span class=\"mdl-chip__text\">None Used.</span></span>' +\n        '</li>');\n    }\n  }\n\n  function showToast(text) {\n    var snackbarContainer = document.querySelector('#demo-toast-example'),\n      showToastButton = document.querySelector('#demo-show-toast'),\n      toastMessage = {message: text};\n    snackbarContainer.MaterialSnackbar.showSnackbar(toastMessage);\n  }\n\n  function createPlotChart() {\n    // //needs plugin\n    // var chart = new Chartist.Line('.ct-chart', {\n    //   labels: [1, 2, 3],\n    //   series: [\n    //     [\n    //       {meta: 'description', value: 1},\n    //       {meta: 'description', value: 5},\n    //       {meta: 'description', value: 3}\n    //     ],\n    //     [\n    //       {meta: 'other description', value: 2},\n    //       {meta: 'other description', value: 4},\n    //       {meta: 'other description', value: 2}\n    //     ]\n    //   ]\n    // }, {\n    //   plugins: [\n    //     Chartist.plugins.tooltip()\n    //   ]\n    // });\n  }\n  //Add Search Function\n  $(\".searchContainer\").on('click','.searchnow', searchNow);\n\n  //Add enter to search function\n  $(document).keypress(function(event){\n\n    var keycode = (event.keyCode ? event.keyCode : event.which);\n    if(keycode == '13'){\n      $('.searchnow').click();\n    }\n  });\n  //Navigation Functions\n  //********************\n  $(document).on('click', 'a.mdl-navigation__link', function(e) {\n    var currentClickedObj = $(e.currentTarget);\n    if (currentClickedObj.data('link')) {\n      event.preventDefault();\n      $('main .tab').hide();\n      $('main #' + currentClickedObj.data('link')).show();\n    }\n  });\n\n})();\n"]}